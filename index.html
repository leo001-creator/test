<!DOCTYPE html>
<html lang="lt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUS CYBER-OS v2.0</title>
    <style>
        :root {
            --neon-blue: #00d4ff;
            --neon-pink: #ff0055;
            --neon-green: #39ff14;
            --glass-bg: rgba(20, 20, 25, 0.8);
            --border-glow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background: #050505;
            color: white;
            font-family: 'Segoe UI', Roboto, sans-serif;
            overflow: hidden;
            user-select: none;
        }

        /* Matrix Canvas Background */
        #matrix-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        /* Scanline Effect */
        body::after {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 4px, 3px 100%;
            pointer-events: none;
            z-index: 1000;
        }

        /* Top Bar */
        .top-bar {
            height: 40px;
            background: rgba(0, 0, 0, 0.9);
            border-bottom: 1px solid var(--neon-blue);
            display: flex;
            align-items: center;
            padding: 0 20px;
            justify-content: space-between;
            font-family: 'Courier New', monospace;
            box-shadow: var(--border-glow);
        }

        /* Main Workspace */
        .desktop {
            position: relative;
            width: 100vw;
            height: calc(100vh - 40px);
            padding: 20px;
            box-sizing: border-box;
        }

        /* Window Style */
        .window {
            position: absolute;
            background: var(--glass-bg);
            border: 1px solid var(--neon-blue);
            border-radius: 8px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            min-width: 300px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            resize: both;
        }

        .window-header {
            background: rgba(0, 212, 255, 0.2);
            padding: 10px;
            cursor: move;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 12px;
            letter-spacing: 1px;
        }

        .window-content {
            padding: 15px;
            flex-grow: 1;
            overflow-y: auto;
        }

        /* Functional UI Elements */
        .btn {
            background: transparent;
            border: 1px solid var(--neon-blue);
            color: var(--neon-blue);
            padding: 10px 15px;
            margin: 5px;
            cursor: pointer;
            text-transform: uppercase;
            font-size: 11px;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            background: var(--neon-blue);
            color: black;
            box-shadow: 0 0 15px var(--neon-blue);
        }

        .btn-pink { border-color: var(--neon-pink); color: var(--neon-pink); }
        .btn-pink:hover { background: var(--neon-pink); box-shadow: 0 0 15px var(--neon-pink); }

        /* Progress Bars */
        .stat-row { margin-bottom: 15px; }
        .progress-container {
            width: 100%;
            height: 10px;
            background: #222;
            border-radius: 5px;
            margin-top: 5px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background: var(--neon-blue);
            transition: width 0.5s ease;
        }

        /* System Terminal Log */
        #terminal {
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: var(--neon-green);
            background: rgba(0,0,0,0.5);
            padding: 10px;
            height: 150px;
            overflow-y: auto;
            border: 1px solid #333;
        }

        /* Glitch Effect */
        .glitch {
            animation: glitch 0.2s infinite;
        }
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }

        /* Responsive Mobile Warning */
        @media (max-width: 600px) {
            .window { width: 90% !important; left: 5% !important; top: 10% !important; }
        }
    </style>
</head>
<body>

<canvas id="matrix-bg"></canvas>

<div class="top-bar">
    <div>NEXUS_OS // KERNEL v4.1.2</div>
    <div id="clock">00:00:00</div>
    <div>USER: ADMIN // STATUS: <span style="color:var(--neon-green)">ONLINE</span></div>
</div>

<div class="desktop" id="desktop">

    <div class="window" style="top: 50px; left: 50px; width: 400px;" id="win1">
        <div class="window-header" onmousedown="dragElement(this.parentElement)">
            <span>Sistemos Diagnostika</span>
            <button class="btn" style="padding:2px 5px" onclick="this.parentElement.parentElement.style.display='none'">X</button>
        </div>
        <div class="window-content">
            <div class="stat-row">
                CPU NAUDOJIMAS: <span id="cpu-val">0%</span>
                <div class="progress-container"><div class="progress-bar" id="cpu-bar"></div></div>
            </div>
            <div class="stat-row">
                NEURONINIS RYŠYS: <span id="link-val">0%</span>
                <div class="progress-container"><div class="progress-bar" id="link-bar" style="background:var(--neon-pink)"></div></div>
            </div>
            <div class="stat-row">
                ATMINTIS: <span id="mem-val">0%</span>
                <div class="progress-container"><div class="progress-bar" id="mem-bar" style="background:var(--neon-green)"></div></div>
            </div>
            <button class="btn" onclick="optimizeSystem()">Optimizuoti</button>
            <button class="btn btn-pink" onclick="triggerOverload()">Perkrauti branduolį</button>
        </div>
    </div>

    <div class="window" style="top: 100px; left: 500px; width: 350px;" id="win2">
        <div class="window-header" onmousedown="dragElement(this.parentElement)">
            <span>Valdymo Modulis</span>
        </div>
        <div class="window-content">
            <button class="btn" onclick="spawnWindow()">Sukurti naują sesiją</button>
            <button class="btn" onclick="toggleMatrix()">Matricos jungiklis</button>
            <button class="btn" onclick="screenGlitch()">Vizualinis Glitch</button>
            <button class="btn btn-pink" onclick="selfDestruct()">Savilikvidacija</button>
            <hr style="border:0; border-top:1px solid #333">
            <div id="terminal">System boot successful...<br>Awaiting commands...</div>
        </div>
    </div>

</div>

<script>
    // 1. Matrix Background Effect
    const canvas = document.getElementById('matrix-bg');
    const ctx = canvas.getContext('2d');
    let matrixActive = true;

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const katakana = 'アァカサタナハマヤャラワガザダバパイィキシチニヒミリヰギジヂビピウゥクスツヌフムユュルグズヅブプエェケセテネヘメレヱゲゼデベペオォコソトノホモヨョロヲゴゾドボポヴッン';
    const latin = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
    const nums = '0123456789';
    const alphabet = katakana + latin + nums;
    const fontSize = 16;
    const columns = canvas.width / fontSize;
    const rainDrops = Array.from({ length: columns }).fill(1);

    function drawMatrix() {
        if (!matrixActive) return;
        ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        ctx.fillStyle = '#0f0';
        ctx.font = fontSize + 'px monospace';

        for (let i = 0; i < rainDrops.length; i++) {
            const text = alphabet.charAt(Math.floor(Math.random() * alphabet.length));
            ctx.fillText(text, i * fontSize, rainDrops[i] * fontSize);
            if (rainDrops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                rainDrops[i] = 0;
            }
            rainDrops[i]++;
        }
    }
    setInterval(drawMatrix, 30);

    // 2. Real-time Clock
    function updateClock() {
        const now = new Date();
        document.getElementById('clock').innerText = now.getHours().toString().padStart(2, '0') + ":" + 
            now.getMinutes().toString().padStart(2, '0') + ":" + 
            now.getSeconds().toString().padStart(2, '0');
    }
    setInterval(updateClock, 1000);

    // 3. System Bars Simulation
    function updateStats() {
        const cpu = Math.floor(Math.random() * 100);
        const link = Math.floor(Math.random() * 100);
        const mem = Math.floor(Math.random() * 100);

        document.getElementById('cpu-bar').style.width = cpu + '%';
        document.getElementById('cpu-val').innerText = cpu + '%';
        document.getElementById('link-bar').style.width = link + '%';
        document.getElementById('link-val').innerText = link + '%';
        document.getElementById('mem-bar').style.width = mem + '%';
        document.getElementById('mem-val').innerText = mem + '%';

        if(cpu > 80) terminalLog("Įspėjimas: Didelė CPU apkrova!", "critical");
    }
    setInterval(updateStats, 3000);

    // 4. Terminal Log
    function terminalLog(msg, type = "info") {
        const term = document.getElementById('terminal');
        const color = type === "critical" ? "var(--neon-pink)" : "var(--neon-green)";
        term.innerHTML += `<div style="color:${color}">> [${type.toUpperCase()}] ${msg}</div>`;
        term.scrollTop = term.scrollHeight;
    }

    // 5. Functions
    function toggleMatrix() {
        matrixActive = !matrixActive;
        terminalLog(matrixActive ? "Matrica aktyvuota" : "Matrica sustabdyta");
        if(!matrixActive) ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function screenGlitch() {
        document.body.classList.add('glitch');
        terminalLog("Vizualinis trikdis aptiktas", "warning");
        setTimeout(() => document.body.classList.remove('glitch'), 500);
    }

    function optimizeSystem() {
        terminalLog("Valomi laikinieji failai...", "info");
        terminalLog("Sistemos našumas padidėjo 15%", "info");
    }

    function triggerOverload() {
        terminalLog("KRITINĖ KLAIDA: Branduolio perkrova!", "critical");
        document.body.style.filter = "invert(1) hue-rotate(90deg)";
        setTimeout(() => document.body.style.filter = "none", 200);
    }

    function selfDestruct() {
        if(confirm("AR TIKRAI PRADĖTI SAVILIKVIDACIJOS PROCESĄ?")) {
            let count = 5;
            terminalLog("SAVILIKVIDACIJA PRADĖTA", "critical");
            const interval = setInterval(() => {
                terminalLog("T-minus " + count);
                count--;
                if(count < 0) {
                    clearInterval(interval);
                    document.body.innerHTML = "<h1 style='color:red; text-align:center; margin-top:20%'>SISTEMA SUNAIKINTA</h1>";
                }
            }, 1000);
        }
    }

    function spawnWindow() {
        const id = "win" + Math.random().toString(36).substr(2, 5);
        const win = document.createElement('div');
        win.className = "window";
        win.style.top = "200px";
        win.style.left = "300px";
        win.id = id;
        win.innerHTML = `
            <div class="window-header" onmousedown="dragElement(this.parentElement)">
                <span>NAUJA SESIJA</span>
                <button class="btn" style="padding:2px 5px" onclick="this.parentElement.parentElement.remove()">X</button>
            </div>
            <div class="window-content">
                <p>Objektas: ${id}</p>
                <button class="btn" onclick="alert('Bip-Bop!')">Testuoti</button>
            </div>
        `;
        document.getElementById('desktop').appendChild(win);
        terminalLog("Sukurta nauja sesija: " + id);
    }

    // 6. Draggable Logic
    function dragElement(elmnt) {
        let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
        elmnt.onmousedown = dragMouseDown;

        function dragMouseDown(e) {
            e = e || window.event;
            // if we are clicking button inside header, don't drag
            if(e.target.tagName === "BUTTON") return;
            pos3 = e.clientX;
            pos4 = e.clientY;
            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;
            // Bring to front
            document.querySelectorAll('.window').forEach(w => w.style.zIndex = 1);
            elmnt.style.zIndex = 100;
        }

        function elementDrag(e) {
            e = e || window.event;
            pos1 = pos3 - e.clientX;
            pos2 = pos4 - e.clientY;
            pos3 = e.clientX;
            pos4 = e.clientY;
            elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
            elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
        }

        function closeDragElement() {
            document.onmouseup = null;
            document.onmousemove = null;
        }
    }

    // Init first windows
    dragElement(document.getElementById('win1'));
    dragElement(document.getElementById('win2'));

</script>
</body>
</html>
